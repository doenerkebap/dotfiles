#!/bin/bash

FILE="$XDG_CACHE_HOME"/current_color

get_current_color()
{
    if [ ! -f "$FILE" ]; then
	echo none > "$FILE"
    fi
    cat "$FILE"
}

switch()
{
    to="$1"
    termite "$to"
    echo "$to" > "$FILE"
}

toggle()
{
    current_color="$(get_current_color)"
    case "$current_color" in
        dark)
            switch light ;;
        light)
            switch dark ;;
	*)
            switch light ;;
    esac
}

termite()
{
    cat "$ZSH"/termite/termite.config/{base-config,color-config-"$1"} > "$ZSH"/termite/termite.config/config
    killall -USR1 termite
}

toggle
